{"version":3,"sources":["../../server/node-web-streams-helper.ts"],"names":["readableStreamTee","chainStreams","streamFromArray","streamToString","encodeText","decodeText","createBufferedTransformStream","createFlushEffectStream","renderToInitialStream","continueFromInitialStream","createSuffixStream","createPrefixStream","createInlineDataStream","readable","transformStream","TransformStream","transformStream2","writer","writable","getWriter","writer2","reader","getReader","read","then","done","value","close","write","streams","promise","Promise","resolve","i","length","pipeTo","preventClose","strings","forEach","str","stream","textDecoder","TextDecoder","bufferedString","input","TextEncoder","encode","decode","transform","v","pendingFlush","flushBuffer","controller","setTimeout","buffered","enqueue","chunk","flush","handleFlushEffect","flushedChunk","ReactDOMServer","element","streamOptions","renderToReadableStream","renderStream","suffix","dataStream","generateStaticHTML","flushEffectHandler","closeTag","suffixUnclosed","split","allReady","transforms","filter","nonNullable","reduce","pipeThrough","prefix","prefixFlushed","prefixPrefixFlushFinished","res","dataStreamFinished","dataStreamReader","err","error"],"mappings":"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"}