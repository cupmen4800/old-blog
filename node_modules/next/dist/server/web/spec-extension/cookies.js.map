{"version":3,"sources":["../../../../server/web/spec-extension/cookies.ts"],"names":["CookieSerializeOptions","normalizeCookieOptions","options","Object","assign","maxAge","expires","Date","now","path","serializeValue","value","JSON","stringify","String","serializeExpiredCookie","key","cookie","serialize","deserializeCookie","input","headers","get","undefined","split","serializeCookie","join","Cookies","Map","parsedInput","parse","entries","set","NextCookies","response","args","isAlreadyAdded","has","store","currentCookie","Error","setCookie","filter","startsWith","append","delete","isDeleted","expiredCookie","clear","expiredCookies","Array","from","keys","map"],"mappings":"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"}