{"version":3,"sources":["../../lib/download-wasm-swc.ts"],"names":["downloadWasmSwc","Log","MAX_VERSIONS_TO_CACHE","version","wasmDirectory","variant","pkgName","tarFileName","substring","outputDirectory","path","join","fileExists","cacheDirectory","result","envDefined","process","env","systemCacheDirectory","platform","XDG_CACHE_HOME","os","homedir","LOCALAPPDATA","console","error","Error","exit","isAbsolute","resolve","cwd","fs","promises","mkdir","recursive","extractFromTar","tar","x","file","strip","info","tempFile","Date","now","registry","output","execSync","toString","trim","startsWith","_","fetch","then","res","ok","status","cacheWriteStream","createWriteStream","Promise","reject","body","pipe","on","err","finally","close","rename","cacheFiles","readdir","length","sort","i","unlink","catch"],"mappings":"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"}